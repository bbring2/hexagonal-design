# Chapter 2 - Wrapping Business Rules Inside Domain Hexagon
Following are the instructions to compile and run the code samples.

You need to run these commands from within the chapter 2 directory:

**To compile**
```
mvn clean package
```

**To run**
```
java -jar target/chapter2-1.0-SNAPSHOT.jar
```

# 아키텍처 핵심 기초
## 2. 도메인 헥사곤으로 비즈니스 규칙 감싸기
> - 엔티티를 활용한 문제 영역 모델링
> - 값 객체를 통한 서술성(descriptiveness) 향상
> - 에그리게잇(aggregate)을 통한 일관성 보장
> - 도메인 서비스 활용
> - 정책(policy) 및 명세(specification) 패턴을 활용한 비즈니스 규칙 처리
> - POJO(Plain Old Java Object)를 이용한 비즈니스 규칙 정의

---

### 2.1. 엔티티를 활용한 문제 영역 모델링
- 도메인 주도 개발 답게, 코드를 작성하기 전에 도매인 전문가와 많은 논의를 해야한다.
- 지식 크런칭(Knowledge crunching) : 지식 고속 처리를 의미하며, 개발자와 도메인 전문가로 이루어진 팀의 협업 활동으로 주로 개발자가 주도함.
- 보편언어(Ubiquitous Language)를 통해 통합되며, 프로젝트에 참여하는 모든 사람들에게 공용어(lingua franca) 역할을 하며, 이것은 문서, 일상 대화, 코드에서도 사용된다.
- 엔티티는 헥사고날 아키텍처의 일급객체(first-class citizen)이다. 여기서 일급객체는 컴퓨터 프로그래밍 언어 디자인에서 다른 객체들에 적용 가능한 연산을 모두 지원하는 객체를 의미한다.

**2.1.1. 도메인 엔티티의 순수성**
- 가능한 한 정확하게 실제 시나리오를 코드로 변환하는 것이다. 
- 고객의 니즈를 충족하기 위해 문제 영역에 대한 모델링 활동은 수익을 얻고, 소프트웨어에 의존하는 조직 전반의 성공을 결정하는데 중요한 역할을 한다. 
- 비즈니스 관련 코드와 기술 관련 코드가 혼동되는 것을 방지하기 위해 노력해야한다.
- 다시한번 강조하지만, 도메인 엔티티에는 비즈니스 관심사만 처리한다는 점에서 순수하여야만 하며, POJO로 이루어져야한다.

**2.1.2. 관련 엔티티**
- 비즈니스 규칙과 비즈니스 데이터라는 두 요소의 존재는 관련 엔티티의 특징을 결정한다.
- 빈약한 도메인 모델(Anemic domain model) : 비즈니스 적으로 유의미하지 않은 객체나 비즈니스 로직이 전혀 없는 도메인 객체들을 갖는 도메인 모델
- 이러한 빈약한 도메인 모델에서 도출되는 엔티티 객체는 데이터는 있지만 동작은 부족하다 -> OOP의 본질에 반한다.

**2.1.3. UUID를 이용한 식별자 정의**
- 엔티티는 '식별성'이 따른다. 그러려면 무엇이 필요할까? 중복 생성 및 방지를 피하는 것이 필요하다.
- 우리는 데이터베이스 시퀀스 메커니즘에 의존하는 식별자 생성 기법에 익숙해 있으나, 이것은 외부 시스템과 결합하기 때문에 책임을 위임하는 것과 같다.
- 고로, 범용적 고유 식별자(Universally unique identifier) 줄여서 UUID 를 사용해야한다.
- 참고로, UUID 생성 방법에는 시간 기반, 분산 컴퓨터 환경(DCE; Distributed Computer Environment) 보안, 이름 기반, 무작위 생성이 있다.


---

### 2.2. 값 객체를 통한 서술력 향상
- 값 객체의 2가지 특성 : 불변이면서, 식별자를 갖지않는다
- 값 객체는 폐기할 수 있어야하고, 엔티티나 다른 객체 타입을 구성하는데 사용할 수 있는 쉽게 교체 가능한 객체여야한다.

---

### 2.3. 에그리게잇을 통한 일관성 보장
- 에그리게잇(Aggregate) : 엔티티와 값 객체의 그룹이 함께 전체적인 개념을 설명하는 경우에 사용되며, 객체의 데이터와 동작을 조정하는 오케스트레이터(orchestrator)와 같다.

---

### 2.4. 도메인 서비스 활용

---

### 2.5. 정책 패턴과 명세 패턴을 활용한 비즈니스 규칙 처리

---

### 2.6. POJO 통한 비즈니스 규칙 정의 